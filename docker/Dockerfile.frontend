FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY frontend/package*.json ./
RUN npm ci

# Copy application
COPY frontend/ .

# Build application
RUN npm run build

# Expose port (Next.js will listen on this port via package.json start script)
# The start script is: "next start -p 8022"
# So we expose 8022 instead of 3000
EXPOSE 8022

# Run application
CMD ["npm", "start"]
